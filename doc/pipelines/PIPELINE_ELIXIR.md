# Elixir Ingestion Pipeline

Elixir documentation centers on Hex.pm and ExDoc. Instead of parsing source or pre-rendered HTML, Documango extracts documentation directly from the search index files distributed with the package.

## Source Acquisition

**URL Pattern**: `https://repo.hex.pm/docs/{package}-{version}.tar.gz`

Content is a static website generated by ExDoc.

## Data Extraction

Documango avoids HTML scraping and conversion by utilizing ExDoc's machine-readable data:

### Search Data Extraction

The file `dist/search_data-*.js` contains the entire documentation corpus in Markdown format.

1. Find the hashed `search_data.js` file in the `dist/` directory.
2. Extract the `searchData` JSON object using regular expressions.
3. Parse individual items (`type: "module"`, `type: "function"`, `type: "task"`, etc.).

### Sidebar Structure

The file `dist/sidebar_items-*.js` contains the module hierarchy and arity information.

## Mapping to Unified Schema

- **Documents Table**: Items are grouped by their reference (page) and stored as compressed Markdown.
- **Search Index**: Function titles (e.g., `render/2`), module names, and task names (e.g., `mix phx.new`) are indexed.
- **Agent Context**: Symbols and signatures are extracted from titles; summaries are taken from the first line of the documentation.

## Dependencies

- `repo.hex.pm` - Documentation tarballs
- `encoding/json` - Metadata parsing
- `regexp` - JavaScript variable extraction
