# Rust Ingestion Pipeline

Rust documentation is generated by rustdoc, centralized around crates.io and docs.rs.

## Dual-Path Strategy

Two ingestion paths ensure reliability across different environments.

### Path A: Nightly JSON (Preferred)

**Requirement**: Rust Nightly toolchain

**Command**: `cargo +nightly doc --output-format json`

**Output**: Massive JSON blob representing entire crate documentation

**Benefits**:

- Perfect structural data
- Traverse JSON tree to find every `impl`, `trait`, `macro`
- Direct mapping to internal Markdown representation

**Transformation**: Port `cargo-doc-md` logic to Go for converting Rustdoc JSON items (Enums, Structs) into Markdown tables.

**Risk**: JSON format is unstable, changes between compiler versions.

### Path B: Docs.rs Scraper (Fallback)

**URL**: `https://docs.rs/crate/{crate}/{version}/download`

**Parsing**: Use goquery to target main content div.

**Cleanup Required**:

- Strip "Click to copy" buttons
- Remove "Run this code" overlays
- Handle class-heavy rustdoc HTML

## Re-export Resolution

Rust's `pub use` re-exports link to original `DefId` in JSON output. Indexing logic must resolve these pointers so searching for `std::io::Result` correctly points to `std::result::Result`.

## Dependencies

- `crates.io` - Crate metadata
- `docs.rs` - Pre-rendered HTML fallback
- `cargo +nightly` - JSON output generation
- `goquery` - HTML parsing for fallback path
